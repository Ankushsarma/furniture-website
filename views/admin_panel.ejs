<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Wow Modular</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: hsl(30 100% 98%);
      --fg-light: hsl(0 14% 21%);
      --primary: hsl(26 27% 49%);
      --primary-fg: hsl(0 0% 100%);
      --secondary: hsl(30 48% 89%);
      --accent: hsl(153 9% 42%);
      --border: hsl(30 35% 85%);
      --card: hsl(0 0% 100%);
      --radius: 1.875rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-light);
      color: var(--fg-light);
    }

    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
    }

    /* Login Page */
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .login-box {
      background: white;
      padding: 3rem;
      border-radius: var(--radius);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
    }

    .login-box h1 {
      margin-bottom: 0.5rem;
      color: var(--primary);
    }

    .login-box p {
      margin-bottom: 2rem;
      color: rgba(51, 35, 35, 0.7);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 0.75rem;
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .btn {
      width: 100%;
      padding: 0.75rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 0.75rem;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover {
      background: var(--accent);
    }

    .btn-secondary {
      background: var(--secondary);
      color: var(--fg-light);
    }

    .btn-secondary:hover {
      background: var(--border);
    }

    .btn-danger {
      background: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    /* Admin Dashboard */
    .admin-container {
      display: none;
      min-height: 100vh;
    }

    .admin-header {
      background: white;
      padding: 1.5rem 2rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-header h1 {
      color: var(--primary);
      font-size: 1.5rem;
    }

    .logout-btn {
      padding: 0.5rem 1.5rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      font-weight: 500;
    }

    .admin-body {
      display: flex;
    }

    .sidebar {
      width: 250px;
      background: white;
      min-height: calc(100vh - 80px);
      padding: 2rem 0;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      padding: 1rem 2rem;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 3px solid transparent;
    }

    .sidebar-menu li:hover {
      background: var(--secondary);
    }

    .sidebar-menu li.active {
      background: var(--secondary);
      border-left-color: var(--primary);
      font-weight: 600;
    }

    .main-content {
      flex: 1;
      padding: 2rem;
    }

    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .section-header h2 {
      font-size: 2rem;
    }

    .card {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 2rem;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .stat-card h3 {
      color: rgba(51, 35, 35, 0.7);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .stat-card .number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .data-table th {
      background: var(--secondary);
      padding: 1rem;
      text-align: left;
      font-weight: 600;
    }

    .data-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
    }

    .data-table tr:hover {
      background: var(--bg-light);
    }

    .action-btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 0.875rem;
      margin-right: 0.5rem;
    }

    .btn-edit {
      background: var(--accent);
      color: white;
    }

    .btn-delete {
      background: #dc3545;
      color: white;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--fg-light);
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 0.75rem;
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
      resize: vertical;
      min-height: 100px;
    }

    textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .file-preview {
      margin-top: 1rem;
    }

    .file-preview img {
      max-width: 200px;
      border-radius: 0.5rem;
    }

    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .badge-new {
      background: #28a745;
      color: white;
    }

    .badge-read {
      background: var(--secondary);
      color: var(--fg-light);
    }

    @media (max-width: 768px) {
      .admin-body {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        min-height: auto;
      }

      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Login Page -->
  <div class="login-container" id="loginPage">
    <div class="login-box">
      <h1>Admin Login</h1>
      <p>Wow Modular Admin Panel</p>
      <form id="loginForm">
        <div class="form-group">
          <label>Username</label>
          <input type="text" id="username" required>
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="password" required>
        </div>
        <button type="submit" class="btn">Login</button>
      </form>
      <p style="margin-top: 1rem; font-size: 0.875rem; color: #999;">Demo: admin / admin123</p>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div class="admin-container" id="adminDashboard">
    <div class="admin-header">
      <h1>Wow Modular Admin Panel</h1>
      <button class="logout-btn" id="logoutBtn">Logout</button>
    </div>
    <div class="admin-body">
      <aside class="sidebar">
        <ul class="sidebar-menu">
          <li class="active" data-section="dashboard">Dashboard</li>
          <li data-section="messages">Contact Messages</li>
          <li data-section="testimonials">Testimonials</li>
          <li data-section="projects">Projects</li>
        </ul>
      </aside>
      <main class="main-content">
        <!-- Dashboard Section -->
        <section class="content-section active" id="dashboard">
          <div class="section-header">
            <h2>Dashboard Overview</h2>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Total Messages</h3>
              <div class="number" id="totalMessages">0</div>
            </div>
            <div class="stat-card">
              <h3>Unread Messages</h3>
              <div class="number" id="unreadMessages">0</div>
            </div>
            <div class="stat-card">
              <h3>Total Testimonials</h3>
              <div class="number" id="totalTestimonials">0</div>
            </div>
            <div class="stat-card">
              <h3>Total Projects</h3>
              <div class="number" id="totalProjects">0</div>
            </div>
          </div>
          <div class="card">
            <h3>Recent Messages</h3>
            <table class="data-table" id="recentMessagesTable">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Service</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- Messages Section -->
        <section class="content-section" id="messages">
          <div class="section-header">
            <h2>Contact Messages</h2>
          </div>
          <div class="card">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Service</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="messagesTableBody"></tbody>
            </table>
          </div>
        </section>

        <!-- Testimonials Section -->
        <section class="content-section" id="testimonials">
          <div class="section-header">
            <h2>Testimonials</h2>
            <button class="btn" style="width: auto; padding: 0.75rem 2rem;" id="addTestimonialBtn">Add Testimonial</button>
          </div>
          <div class="card">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Author</th>
                  <th>Rating</th>
                  <th>Review</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="testimonialsTableBody"></tbody>
            </table>
          </div>
        </section>

        <!-- Projects Section -->
        <section class="content-section" id="projects">
          <div class="section-header">
            <h2>Projects</h2>
            <button class="btn" style="width: auto; padding: 0.75rem 2rem;" id="addProjectBtn">Add Project</button>
          </div>
          <div class="card">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Image</th>
                  <th>Title</th>
                  <th>Description</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="projectsTableBody"></tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Message Detail Modal -->
<% messages.forEach(msg => { %>
  <div class="message-box" onclick="openMessage('<%= msg._id %>')">
    <p><strong>File:</strong> <%= msg.fileName %></p>
    <p><strong>Date:</strong> <%= msg.uploadedAt.toLocaleString() %></p>
  </div>

  <script>
    function openMessage(id) {
      const data = {
        file: "<%= msg.filePath %>",
        name: "<%= msg.fileName %>",
        date: "<%= msg.uploadedAt.toLocaleString() %>"
      };

      document.getElementById("messageDetails").innerHTML = `
        <p><strong>File Name:</strong> ${data.name}</p>
        <p><strong>Date:</strong> ${data.date}</p>
        <img src="${data.file}" style="width:100%; margin-top:10px;">
      `;

      document.getElementById("messageModal").style.display = "block";
    }
  </script>
<% }) %>



  <!-- Testimonial Modal -->
  <div class="modal" id="testimonialModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="testimonialModalTitle">Add Testimonial</h2>
        <button class="close-btn" onclick="closeModal('testimonialModal')">&times;</button>
      </div>
      <form id="testimonialForm">
        <input type="hidden" id="testimonialId">
        <div class="form-group">
          <label>Author Name</label>
          <input type="text" id="testimonialAuthor" required>
        </div>
        <div class="form-group">
          <label>Rating (1-5)</label>
          <input type="number" id="testimonialRating" min="1" max="5" value="5" required>
        </div>
        <div class="form-group">
          <label>Review</label>
          <textarea id="testimonialReview" required></textarea>
        </div>
        <button type="submit" class="btn">Save Testimonial</button>
      </form>
    </div>
  </div>

  <!-- Project Modal -->
  <div class="modal" id="projectModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="projectModalTitle">Add Project</h2>
        <button class="close-btn" onclick="closeModal('projectModal')">&times;</button>
      </div>
      <form id="projectForm">
        <input type="hidden" id="projectId">
        <div class="form-group">
          <label>Project Title</label>
          <input type="text" id="projectTitle" required>
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea id="projectDescription" required></textarea>
        </div>
        <div class="form-group">
          <label>Image URL</label>
          <input type="url" id="projectImage" required placeholder="https://example.com/image.jpg">
        </div>
        <div class="file-preview" id="projectImagePreview"></div>
        <button type="submit" class="btn">Save Project</button>
      </form>
    </div>
  </div>

  <script>
    // Sample Data Storage (In production, this would be a backend database)
    let data = {
      messages: [],
      testimonials: [
        { id: 1, author: 'Rahul Sharma', rating: 5, review: 'Working with Wow Modular was incredible! The custom furniture they designed exceeded my expectations. Professional service from start to finish.' },
        { id: 2, author: 'Priya & Rahaan', rating: 5, review: 'Impeccable craftsmanship and attention to detail. They transformed our living space into something truly special. Highly recommend their services!' }
      ],
      projects: [
        { id: 1, title: 'Luxury Living Room Setup', description: 'Contemporary furniture design with custom upholstery', image: 'https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=600&h=450&fit=crop' },
        { id: 2, title: 'Contemporary Dining Space', description: 'Elegant dining furniture with modern aesthetics', image: 'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?w=600&h=450&fit=crop' },
        { id: 3, title: 'Master Bedroom Suite', description: 'Premium quality bedroom set with luxury finishing', image: 'https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?w=600&h=450&fit=crop' }
      ]
    };

    // Load from localStorage if available
    const savedData = localStorage.getItem('wowModularData');
    if (savedData) {
      data = JSON.parse(savedData);
    }

    // Save to localStorage
    function saveData() {
      localStorage.setItem('wowModularData', JSON.stringify(data));
      updateDashboard();
    }

    // Login System
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      if (username === 'admin' && password === 'admin123') {
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('adminDashboard').style.display = 'block';
        loadAllData();
      } else {
        alert('Invalid credentials');
      }
    });

    document.getElementById('logoutBtn').addEventListener('click', () => {
      document.getElementById('loginPage').style.display = 'flex';
      document.getElementById('adminDashboard').style.display = 'none';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    });

    // Sidebar Navigation
    document.querySelectorAll('.sidebar-menu li').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.sidebar-menu li').forEach(li => li.classList.remove('active'));
        item.classList.add('active');
        
        const section = item.getAttribute('data-section');
        document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(section).classList.add('active');
      });
    });

    // Update Dashboard
    function updateDashboard() {
      const unread = data.messages.filter(m => !m.read).length;
      document.getElementById('totalMessages').textContent = data.messages.length;
      document.getElementById('unreadMessages').textContent = unread;
      document.getElementById('totalTestimonials').textContent = data.testimonials.length;
      document.getElementById('totalProjects').textContent = data.projects.length;
      
      // Recent messages
      const recentTable = document.getElementById('recentMessagesTable').querySelector('tbody');
      recentTable.innerHTML = '';
      data.messages.slice(0, 5).forEach(msg => {
        const row = recentTable.insertRow();
        row.innerHTML = `
          <td>${msg.name}</td>
          <td>${msg.email}</td>
          <td>${msg.service}</td>
          <td><span class="badge ${msg.read ? 'badge-read' : 'badge-new'}">${msg.read ? 'Read' : 'New'}</span></td>
        `;
      });
    }

    // Load Messages
    function loadMessages() {
      const tbody = document.getElementById('messagesTableBody');
      tbody.innerHTML = '';
      data.messages.forEach(msg => {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td>${new Date(msg.date).toLocaleDateString()}</td>
          <td>${msg.name}</td>
          <td>${msg.email}</td>
          <td>${msg.phone}</td>
          <td>${msg.service}</td>
          <td><span class="badge ${msg.read ? 'badge-read' : 'badge-new'}">${msg.read ? 'Read' : 'New'}</span></td>
          <td>
            <button class="action-btn btn-edit" onclick="viewMessage(${msg.id})">View</button>
            <button class="action-btn btn-delete" onclick="deleteMessage(${msg.id})">Delete</button>
          </td>
        `;
      });
    }

    function viewMessage(id) {
      const msg = data.messages.find(m => m.id === id);
      if (msg) {
        msg.read = true;
        saveData();
        loadMessages();
        
        document.getElementById('messageDetails').innerHTML = `
          <p><strong>Date:</strong> ${new Date(msg.date).toLocaleString()}</p>
          <p><strong>Name:</strong> ${msg.name}</p>
          <p><strong>Email:</strong> ${msg.email}</p>
          <p><strong>Phone:</strong> ${msg.phone}</p>
          <p><strong>Service:</strong> ${msg.service}</p>
          <p><strong>Message:</strong></p>
          <p>${msg.message}</p>
          ${msg.file ? `<p><strong>File:</strong> ${msg.file}</p>` : ''}
        `;
        openModal('messageModal');
      }
    }

    function deleteMessage(id) {
      if (confirm('Are you sure you want to delete this message?')) {
        data.messages = data.messages.filter(m => m.id !== id);
        saveData();
        loadMessages();
      }
    }

    // Load Testimonials
    function loadTestimonials() {
      const tbody = document.getElementById('testimonialsTableBody');
      tbody.innerHTML = '';
      data.testimonials.forEach(test => {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td>${test.author}</td>
          <td>${'‚≠ê'.repeat(test.rating)}</td>
          <td>${test.review.substring(0, 100)}...</td>
          <td>
            <button class="action-btn btn-edit" onclick="editTestimonial(${test.id})">Edit</button>
            <button class="action-btn btn-delete" onclick="deleteTestimonial(${test.id})">Delete</button>
          </td>
        `;
      });
    }

    document.getElementById('addTestimonialBtn').addEventListener('click', () => {
      document.getElementById('testimonialModalTitle').textContent = 'Add Testimonial';
      document.getElementById('testimonialForm').reset();
      document.getElementById('testimonialId').value = '';
      openModal('testimonialModal');
    });

    document.getElementById('testimonialForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('testimonialId').value;
      const testimonial = {
        id: id ? parseInt(id) : Date.now(),
        author: document.getElementById('testimonialAuthor').value,
        rating: parseInt(document.getElementById('testimonialRating').value),
        review: document.getElementById('testimonialReview').value
      };
      
      if (id) {
        const index = data.testimonials.findIndex(t => t.id === parseInt(id));
        data.testimonials[index] = testimonial;
      } else {
        data.testimonials.push(testimonial);
      }
      
      saveData();
      loadTestimonials();
      closeModal('testimonialModal');
    });

    function editTestimonial(id) {
      const test = data.testimonials.find(t => t.id === id);
      if (test) {
        document.getElementById('testimonialModalTitle').textContent = 'Edit Testimonial';
        document.getElementById('testimonialId').value = test.id;
        document.getElementById('testimonialAuthor').value = test.author;
        document.getElementById('testimonialRating').value = test.rating;
        document.getElementById('testimonialReview').value = test.review;
        openModal('testimonialModal');
      }
    }

    function deleteTestimonial(id) {
      if (confirm('Are you sure you want to delete this testimonial?')) {
        data.testimonials = data.testimonials.filter(t => t.id !== id);
        saveData();
        loadTestimonials();
      }
    }

    // Load Projects
    function loadProjects() {
      const tbody = document.getElementById('projectsTableBody');
      tbody.innerHTML = '';
      data.projects.forEach(proj => {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td><img src="${proj.image}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 0.5rem;"></td>
          <td>${proj.title}</td>
          <td>${proj.description}</td>
          <td>
            <button class="action-btn btn-edit" onclick="editProject(${proj.id})">Edit</button>
            <button class="action-btn btn-delete" onclick="deleteProject(${proj.id})">Delete</button>
          </td>
        `;
      });
    }

    document.getElementById('addProjectBtn').addEventListener('click', () => {
      document.getElementById('projectModalTitle').textContent = 'Add Project';
      document.getElementById('projectForm').reset();
      document.getElementById('projectId').value = '';
      document.getElementById('projectImagePreview').innerHTML = '';
      openModal('projectModal');
    });

    document.getElementById('projectImage').addEventListener('input', (e) => {
      const url = e.target.value;
      if (url) {
        document.getElementById('projectImagePreview').innerHTML = `<img src="${url}" alt="Preview">`;
      }
    });

    document.getElementById('projectForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('projectId').value;
      const project = {
        id: id ? parseInt(id) : Date.now(),
        title: document.getElementById('projectTitle').value,
        description: document.getElementById('projectDescription').value,
        image: document.getElementById('projectImage').value
      };
      
      if (id) {
        const index = data.projects.findIndex(p => p.id === parseInt(id));
        data.projects[index] = project;
      } else {
        data.projects.push(project);
      }
      
      saveData();
      loadProjects();
      closeModal('projectModal');
    });

    function editProject(id) {
      const proj = data.projects.find(p => p.id === id);
      if (proj) {
        document.getElementById('projectModalTitle').textContent = 'Edit Project';
        document.getElementById('projectId').value = proj.id;
        document.getElementById('projectTitle').value = proj.title;
        document.getElementById('projectDescription').value = proj.description;
        document.getElementById('projectImage').value = proj.image;
        document.getElementById('projectImagePreview').innerHTML = `<img src="${proj.image}" alt="Preview">`;
        openModal('projectModal');
      }
    }

    function deleteProject(id) {
      if (confirm('Are you sure you want to delete this project?')) {
        data.projects = data.projects.filter(p => p.id !== id);
        saveData();
        loadProjects();
      }
    }

    // Modal Functions
    function openModal(modalId) {
      document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    // Load All Data
    function loadAllData() {
      updateDashboard();
      loadMessages();
      loadTestimonials();
      loadProjects();
    }

    // Simulate receiving a contact form submission from main website
    window.receiveContactForm = function(formData) {
      const message = {
        id: Date.now(),
        date: new Date().toISOString(),
        name: formData.name,
        email: formData.email,
        phone: formData.phone,
        service: formData.service,
        message: formData.message,
        file: formData.file || null,
        read: false
      };
      data.messages.unshift(message);
      saveData();
      loadMessages();
    };

    // Export data functions for main website
    window.getTestimonials = function() {
      return data.testimonials;
    };

    window.getProjects = function() {
      return data.projects;
    };
  </script>
</body>
</html>